 
    :root{ --bg:#0a0a0a; --fg:#fff; }
    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0; background:var(--bg); color:var(--fg);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
      overflow-x:hidden;   /* sin scroll lateral */
      overflow-y:auto;     /* scroll vertical permitido por defecto */
    }

    /* cuando abrimos el modal bloqueamos el scroll del body */
    .pb-modal-open {
      overflow:hidden;
    }

    /* Fondo canvas animado */
    #bg{ position:fixed; inset:0; width:100vw; height:100vh; z-index:0; display:block }

    /* HERO */
    .hero{
      position:relative; z-index:1;
      min-height:30vh; display:grid; place-items:center;
      padding:clamp(12px,3vw,28px);
    }
    .hero img{ height:clamp(120px,22vw,300px); width:auto; display:block }

    /* COLLAGE */
    main{ position:relative; z-index:1; width:100%; }
    .collage{ position:relative; width:100%; }

    .piece{
      position:absolute; left:50%; top:50%;
      transform: translate(-50%,-50%) translate(var(--tx,0),var(--ty,0)) rotate(var(--rot,0deg)) scale(var(--sc,1));
      will-change: transform; z-index: var(--z,1); transition: transform .18s ease;
      pointer-events:auto;
    }
    .piece img{
      display:block; height:auto; object-fit:contain; background:transparent;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.40));
      user-select:none; -webkit-user-drag:none;
      width: var(--w, 240px);      /* el JS define --w por pieza */
      max-width: min(36vw, 380px);
      max-height: min(30vw, 310px);
    }
    @media (hover:hover){
      .piece:hover{
        transform:
          translate(-50%,-50%)
          translate(var(--tx,0),var(--ty,0))
          rotate(0deg)
          scale(calc(var(--sc,1)*1.02));
      }
    }
    @media (max-width:768px){
      .piece img{
        max-width:min(50vw,280px);
        max-height:min(40vw,240px);
      }
    }

    .sr-only{
      position:absolute; width:1px; height:1px; padding:0; margin:-1px;
      overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0
    }


 

    :root{
      --ipod-mini-width: 140px;   /* tamaño del iPod */
      --screen-left: 12%;
      --screen-top: 8%;
      --screen-w: 76%;
      --screen-h: 28%;
      --wheel-top: 74%;
      --wheel-size: 56%;
    }
    /* Posición flotante arriba-derecha */
    .ipod-photo{
      position: fixed; top: 12px; right: 12px; z-index: 9999;
      width: var(--ipod-mini-width);
      aspect-ratio: 0.436; /* proporción de /assets/ipod.png */
      background: url('/assets/ipod.png') center/cover no-repeat;
      pointer-events: auto; /* que acepte clicks */
      border-radius: 18px;
      -webkit-filter:
        drop-shadow(0 20px 6px rgba(0,0,0,.65))
        drop-shadow(0 34px 18px rgba(0,0,0,.35));
      filter:
        drop-shadow(0 20px 6px rgba(0,0,0,.65))
        drop-shadow(0 34px 18px rgba(0,0,0,.35));
    }
    .ipod-photo .overlay{
      position:absolute; inset:0; pointer-events:auto; color:#eee;
      font:600 11px/1.2 system-ui,-apple-system,Segoe UI,Roboto,sans-serif;
    }

    /* Pantalla del iPod */
    .ipod-screen{
      position:absolute; left:var(--screen-left); top:var(--screen-top);
      width:var(--screen-w); height:var(--screen-h);
      display:grid; grid-template-rows: 1fr auto; gap:4px;
      border-radius:4px; overflow:hidden; background:rgba(0,0,0,.05); padding:4px;
    }
    .ipod-title{
      font-weight:700; font-size:10px;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }
    .ipod-artist{
      font-size:10px; color:#bdbdbd;
      white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
    }

    /* Rueda */
    .ipod-wheel{
      position:absolute; left:50%; top:var(--wheel-top); transform:translate(-50%,-50%);
      width:var(--wheel-size); aspect-ratio:1; border-radius:50%; touch-action:none;
    }
    .ipod-hotzone{
      position:absolute; border:none; padding:0; background:transparent; cursor:pointer;
      width:30%; aspect-ratio:1; border-radius:50%; transform:translate(-50%,-50%);
      transition: transform .12s ease, filter .12s ease;
    }
    .ipod-hotzone.prev{ left:16%; top:50%; }
    .ipod-hotzone.next{ left:84%; top:50%; }
    .ipod-hotzone.play{
      left:50%; top:88%;
      width:24%; aspect-ratio:1; border-radius:50%;
      transform:translate(-50%,-50%);
    }
    .ipod-hotzone:focus-visible{
      outline:none; box-shadow:0 0 0 2px rgba(255,255,255,.18) inset;
    }
    .ipod-hotzone:active{
      box-shadow:0 0 0 3px rgba(255,255,255,.22) inset;
    }



    @media (min-width:769px) and (hover:hover) and (pointer:fine){
      .ipod-hotzone.is-pressing{
        transform: translate(-50%,-50%) scale(.96);
        filter: brightness(.92);
      }
      .ipod-hotzone::after{
        content:"";
        position:absolute; inset:-14%;
        border-radius:50%;
        pointer-events:none;
        background:
          radial-gradient(closest-side, rgba(255,255,255,.22), rgba(255,255,255,0) 70%),
          radial-gradient(closest-side, rgba(0,0,0,.18), rgba(0,0,0,0) 75%);
        opacity:0; transform:scale(.85);
        transition: opacity .12s ease, transform .12s ease;
      }
      .ipod-hotzone.is-pressing::after{ opacity:1; transform:scale(1); }

      @keyframes ipod-pop {
        0%{   transform: translate(-50%,-50%) scale(.96); }
        60%{  transform: translate(-50%,-50%) scale(1.015); }
        100%{ transform: translate(-50%,-50%) scale(1); }
      }
      .ipod-hotzone.pop { animation: ipod-pop .18s cubic-bezier(.2,.8,.2,1); }

      .ipod-hotzone.play{ top:90%; width:28%; }

      .ipod-photo{
        opacity:.45;
        transform:scale(.82);
        transform-origin:top right;
        transition: opacity .18s ease, transform .22s cubic-bezier(.2,.8,.2,1);
        will-change: transform, opacity;
      }
      .ipod-photo:has(.overlay:hover),
      .ipod-photo:has(.overlay:focus-within){
        opacity:1;
        transform:scale(1);
      }
    }

  

    .ipod-screen{
      display:block !important;
      padding:0 !important;
      height:auto !important;
      aspect-ratio: 4 / 3;   /* se ajusta por JS al video real */
      overflow:hidden;
      border-radius:4px;
      background:#000 !important;
    }
    .ipod-screen > div{
      position:absolute; left:6px; right:6px; top:6px;
      pointer-events:none;
    }
    #ipodVideo{
      width:100%; height:100%; object-fit:cover; object-position:center; display:block;
    }
  


    @media (max-width:768px){
      .ipod-photo{ display:none !important; }
    }
  

  

    .music-drawer{
      position:fixed; inset:0 auto 0 0; z-index:60; pointer-events:none;
    }
    .music-drawer__trigger{
      position:fixed; left:0; top:50%; transform:translateY(-50%);
      width:54px; height:54px; border-radius:10px;
      padding:0; overflow:hidden; background:transparent;
      border:1px solid rgba(255,255,255,.14);
      display:block; cursor:pointer; pointer-events:auto;
      transition: box-shadow .18s ease, transform .18s ease, border-color .18s ease, opacity .18s ease;
      outline:none;
    }
    .music-drawer__trigger:hover,
    .music-drawer__trigger:focus-visible{
      transform: translateY(-50%) scale(1.02);
      box-shadow: 0 8px 24px rgba(0,0,0,.35);
      border-color: rgba(255,255,255,.28);
    }
    .music-drawer__icon{
      width:100%; height:100%; display:block; object-fit:cover; border-radius:10px;
    }
    .music-drawer__panel{
      position:fixed; left:0; top:0; bottom:0; width:min(360px, 92vw);
      transform: translateX(-100%); opacity:0;
      transition: transform .24s cubic-bezier(.2,.8,.2,1), opacity .18s ease;
      display:flex; align-items:center; padding-left:12px;
      pointer-events:none;
    }
    .music-drawer:has(.music-drawer__trigger:hover) .music-drawer__panel,
    .music-drawer:has(.music-drawer__panel:hover) .music-drawer__panel{
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }
    .music-drawer:has(.music-drawer__trigger:hover) .music-drawer__trigger,
    .music-drawer:has(.music-drawer__panel:hover) .music-drawer__trigger{
      opacity:0;
      pointer-events:none;
    }
    .music-drawer .ipod-photo{
      position:relative; top:auto; right:auto; z-index:1;
      transform: translateX(-6px) scale(.98);
      opacity:.98;
      transition: transform .24s cubic-bezier(.2,.8,.2,1), opacity .2s ease;
      background: url('/assets/ipod.png') center/cover no-repeat;
    }
    .music-drawer:has(.music-drawer__trigger:hover) .ipod-photo,
    .music-drawer:has(.music-drawer__panel:hover) .ipod-photo{
      transform: translateX(0) scale(1); opacity:1;
    }
    @media (max-width:768px){
      .music-drawer{ display:none !important; }
    }
  



  /* =========================================================
     PRODUCT MODAL (versión página completa + blur de fondo)
     ========================================================= */

  /* Contenedor global del modal: ocupa viewport, hace scroll interno */
  #pbProductModal {
    position: fixed;
    inset: 0;
    z-index: 95;
    display: none;                 /* cerrado */
    overflow-y: auto;              /* scroll vertical normal interno */
    -webkit-overflow-scrolling: touch;
    pointer-events: auto;
    box-sizing: border-box;
    color:#fff;
  }

  /* Abierto */
  #pbProductModal.is-open {
    display: block;
  }

  /* capa oscura + blur sobre el sitio, AHORA dentro del modal y cubre todo.
     si haces click aquí = cerrar */
  .pb-modal-overlay {
    position: fixed;
    inset: 0;
    z-index: 0; /* debajo de la tarjeta del producto (que va con z-index:1), pero encima de la página */
    background: rgba(0,0,0,.45);
    backdrop-filter: blur(12px) saturate(1.2);
    -webkit-backdrop-filter: blur(12px) saturate(1.2);
    cursor: pointer; /* clic en cualquier parte del blur -> cerrar */
    pointer-events:auto;
  }

  /* Contenido central del "producto" */
  .pb-product-modal-card {
    position: relative;
    z-index: 1;           /* por encima del blur interno */
    box-sizing: border-box;
    max-width: min(1280px, 100%);
    margin: 40px auto 120px;
    padding: clamp(16px,2vw,24px);
    background: transparent;  /* SIN fondo negro */
    border: 0;
    border-radius: 0;
    box-shadow: none;
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    color:#fff;
    display: block;
    pointer-events: auto;
  }

  /* botón cerrar oculto visualmente (cerramos clicando blur o fuera) */
  .pb-prod-close-btn {
    display: none;
  }

  /* ===========================
     BLOQUE PRINCIPAL PRODUCTO
     =========================== */
  .pb-prod-main {
    display: grid;
    gap: clamp(16px,2vw,24px);
    padding: 0;
    min-height: 0;
  }
  @media(min-width:768px){
    .pb-prod-main {
      grid-template-columns: minmax(0,1fr) minmax(0,1fr);
      align-items: start;
    }
  }

  /* Galería / carrusel */
  .pb-prod-gallery {
    position: relative;
    background: transparent !important;
    border: 0 !important;
    box-shadow: none !important;
    border-radius: 0;
    padding: 0;
    min-height: auto;
    display:flex;
    flex-direction:column;
    align-items:center;
    overflow:visible;
  }

  .pb-prod-carousel-frame {
    position: relative;
    width:100%;
    aspect-ratio:3/4;
    background:transparent;
    border-radius:0;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  .pb-prod-carousel-image {
    max-width:100%;
    max-height:100%;
    object-fit:contain;
    display:block;
    transition: transform .28s cubic-bezier(.2,.8,.2,1), opacity .28s ease;
  }

  .pb-carousel-arrow {
    position:absolute;
    top:50%;
    transform:translateY(-50%);
    width:40px;
    height:40px;
    border-radius:50%;
    background: rgba(255,255,255,.9);
    border:1px solid rgba(0,0,0,.4);
    box-shadow:0 8px 24px rgba(0,0,0,.6);
    color:#000;
    font-size:22px;
    line-height:1;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:center;
    cursor:pointer;
    user-select:none;
    z-index:3;
  }
  .pb-carousel-arrow:hover { background:#fff; }
  .pb-carousel-arrow--prev { left:8px; }
  .pb-carousel-arrow--next { right:8px; }

  /* (miniaturas eliminadas) */

  /* Detalles / Comprar */
  .pb-prod-details {
    color:#fff;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    display:grid;
    gap:20px;
    margin-top:16px;
  }

  @media(min-width:768px){
    .pb-prod-details {
      align-self:center;
      margin-top:0;
    }
  }

  .pb-prod-title {
    font-size:clamp(20px,1.2vw,24px);
    font-weight:800;
    line-height:1.15;
    margin:0;
    color:#fff;
  }

  .pb-prod-price {
    font-size:18px;
    font-weight:600;
    line-height:1.2;
    color:#fff;
  }

  .pb-prod-colors-block{
    display:grid;
    gap:8px;
  }
  .pb-prod-label{
    font-size:12px;
    font-weight:600;
    text-transform:uppercase;
    color:#8f8f8f;
    letter-spacing:.04em;
  }
  .pb-color-row{
    display:flex;
    flex-wrap:wrap;
    gap:8px;
  }
  .pb-color-pill{
    appearance:none;
    border:none;
    border-radius:6px;
    padding:6px 10px;
    font-size:13px;
    line-height:1.2;
    font-weight:600;
    cursor:pointer;
    background:#fff;
    color:#000;
  }
  .pb-color-pill.active{
    background:#eae400;
    color:#000;
  }

  .pb-purchase-row{
    display:flex;
    flex-wrap:wrap;
    align-items:center;
    gap:12px;
  }

  .pb-qty-box{
    display:inline-flex;
    align-items:center;
    background:rgba(255,255,255,.05);
    border:1px solid rgba(255,255,255,.18);
    border-radius:8px;
    min-width:90px;
    justify-content:space-between;
    font-weight:600;
    color:#fff;
  }
  .pb-qty-btn{
    appearance:none;
    background:none;
    border:0;
    color:#fff;
    font-size:20px;
    line-height:1;
    padding:8px 12px;
    cursor:pointer;
  }
  .pb-qty-num{
    font-size:14px;
    line-height:1;
    padding:0 4px;
    min-width:24px;
    text-align:center;
    color:#fff;
  }
  .pb-atc-btn{
    appearance:none;
    border:0;
    border-radius:8px;
    background:#333;
    border:1px solid rgba(255,255,255,.18);
    color:#fff;
    font-size:14px;
    line-height:1.2;
    font-weight:700;
    padding:10px 16px;
    min-width:120px;
    cursor:not-allowed;
    opacity:.6;
  }

  .pb-prod-desc {
    font-size:14px;
    line-height:1.4;
    color:#cfcfcf;
    white-space:pre-line;
  }

  /* ===========================
     RECOMENDADOS (debajo del producto)
     =========================== */
  .pb-related-block {
    border-top:1px solid rgba(255,255,255,.22);
    background:transparent;
    margin-top:clamp(32px,4vh,64px);
    padding-top:24px;
    padding-bottom:clamp(60px,6vh,100px);
  }

  .pb-related-title {
    margin:0 0 24px 0;
    font-size:clamp(16px,1vw,18px);
    color:#fff;
    font-weight:700;
    display:flex;
    align-items:center;
    justify-content:center; /* centrado respecto a la línea */
    text-align:center;
  }

  .pb-related-row {
    display:flex;
    flex-wrap:wrap;              /* varias filas, sin scroll */
    justify-content:center;      /* centrado debajo de la línea */
    align-items:flex-start;
    gap:24px;                    /* más separación entre productos */
    overflow:visible;            /* quitamos el scroll horizontal */
    padding-bottom:0;
    scrollbar-width:none;
  }
  .pb-related-row::-webkit-scrollbar{ display:none; }

  .pb-related-card {
    position:relative;
    flex:0 0 auto;
    width:200px;                 /* más grande */
    background:transparent;      /* sin fondo gris */
    border:0;                    /* sin borde */
    border-radius:0;
    padding:0;
    box-shadow:none;
    color:#fff;
    font-size:13px;
    font-weight:600;
    line-height:1.3;
    text-align:center;
    cursor:pointer;
  }

  .pb-related-imgwrap{
    width:100%;
    aspect-ratio:3/4;
    background:transparent;      /* sin fondo negro */
    border-radius:0;
    overflow:hidden;
    display:flex;
    align-items:center;
    justify-content:center;
    margin-bottom:12px;
  }
  .pb-related-imgwrap img{
    width:100%;
    height:100%;
    object-fit:contain;          /* que no se corte */
    display:block;
  }

  .pb-related-chip{
    position:absolute;
    top:8px;
    right:8px;
    background:rgba(255,255,255,.9);
    color:#000;
    font-weight:700;
    font-size:11px;
    line-height:1;
    padding:4px 8px;
    border-radius:999px;
  }
  


    .pb-footer-split-wrap{
      --footer-accent: #eae400;
      --footer-gap: 16px;
      --footer-size: 16px;
      --footer-track: 0.5px;
      --ig-size: 24px;
      --footer-pad-x: clamp(14px, 4vw, 28px);
      --footer-pad-y: clamp(18px, 3vw, 28px);
      width: 100%;
      position: relative;
      z-index: 2;
      color: var(--footer-accent);
      background: transparent;
    }
    .pb-footer-split-wrap::before{
      content:"";
      position:absolute; left:0; right:0; top:0; height:1px;
      background: linear-gradient(to right,
        rgba(255,255,255,.06),
        rgba(255,255,255,.12),
        rgba(255,255,255,.06));
    }
    .pb-footer-split{
      margin: 0;
      padding: var(--footer-pad-y) var(--footer-pad-x) calc(var(--footer-pad-y) + 6vh);
    }
    .pb-footer-split__inner{
      display:flex; width:100%;
      justify-content:space-between; align-items:flex-start;
      gap: var(--footer-gap);
    }
    .pb-footer-links{
      display:grid;
      gap: calc(var(--footer-gap)*0.7);
      text-align:left;
      justify-items:start;
    }
    .pb-footer-link{
      display:block; margin:0; padding:0; text-decoration:none;
      font-size: var(--footer-size);
      font-weight: 800;
      letter-spacing: var(--footer-track);
      text-transform: uppercase;
      color: var(--footer-accent);
      line-height: 1.1;
      opacity: .95;
    }
    .pb-footer-link:hover{
      opacity: 1;
      text-decoration: underline;
      text-underline-offset: 3px;
    }
    .pb-footer-ig-col{
      display:grid; justify-items:end; align-content:start; gap:6px; text-align:right;
      min-width: max(var(--ig-size), 24px);
    }
    .pb-footer-ig{
      display:inline-flex; line-height:1; color: var(--footer-accent); text-decoration:none;
      opacity: .95;
    }
    .pb-footer-ig:hover{ opacity: 1; }
    .pb-footer-ig__icon{
      width: var(--ig-size); height: var(--ig-size); display:block;
    }
    .pb-footer-copy{
      font-size: calc(var(--footer-size) * 0.95);
      line-height: 1;
      color: var(--footer-accent);
      letter-spacing: var(--footer-track);
      font-weight: 800;
    }
    @media (max-width: 750px){
      .pb-footer-split__inner{
        flex-direction: column; align-items: stretch;
      }
      .pb-footer-ig-col{
        justify-items: start; text-align: left;
      }
    }
    @media (min-width: 769px){
      .collage { margin-bottom: clamp(80px, 12vh, 200px); }
    }
  


    .music-drawer {
      z-index: 10000 !important;          /* más que modal (95) */
      pointer-events: none !important;    /* el wrapper no bloquea */
    }

    .music-drawer__trigger {
      pointer-events: auto !important;    /* el icono lateral es clickable */
    }

    .music-drawer__panel {
      pointer-events: auto !important;    /* el panel desplegado recibe clics/play/etc */
      z-index: 10001 !important;          /* asegura que el panel esté sobre todo */
    }

    .music-drawer .ipod-photo {
      pointer-events: auto !important;    /* el propio iPod acepta interacción */
    }
  